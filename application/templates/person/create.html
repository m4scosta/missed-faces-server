{% import '_forms.html' as forms %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login | Missed Faces</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="/static/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="import" href="/static/bower_components/paper-drawer-panel/paper-drawer-panel.html">
    <link rel="import" href="/static/bower_components/paper-header-panel/paper-header-panel.html">
    <link rel="import" href="/static/bower_components/paper-toolbar/paper-toolbar.html">
    <link rel="import" href="/static/bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="/static/bower_components/paper-card/paper-card.html">
    <link rel="import" href="/static/bower_components/paper-input/paper-input.html">
    <link rel="import" href="/static/bower_components/paper-button/paper-button.html">

    <link rel="import" href="/static/bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="/static/bower_components/iron-icons/social-icons.html">
    <link rel="import" href="/static/bower_components/iron-flex-layout/iron-flex-layout.html">

    <link rel="import" href="/static/bower_components/font-roboto/roboto.html">

    <link rel="import" href="/static/theme/sky/sky.html">

    <link rel="stylesheet" href="/static/css/styles.css"/>

    <style>
        body {
            font-family: Roboto, 'Noto', 'Helvetica Neue',
            Helvetica, Arial, sans-serif;
            margin: 0;
            height: 100vh;
        }
    </style>

    {% assets "home_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
</head>
<body class="fullbleed vertical layout">

<paper-header-panel class="flex">
    <paper-toolbar>
        <paper-icon-button id="navicon" icon="face"></paper-icon-button>
        <a href="/" class="flex">MISSED FACES</a>

        <ul class="auth-links">
            <li><a href="{{ url_for("auth.signin") }}">CADASTRO</a></li>
            <li><a href="{{ url_for("auth.login") }}">LOGIN</a></li>
            {% if not current_user.is_anonymous %}
                <li><a href="{{ url_for('auth.logout') }}">LOGOUT</a></li>
            {% endif %}
        </ul>
    </paper-toolbar>

    <div class="vertical layout center">
        <paper-card elevation="2" heading="Novo Desaparecido" class="login-card">
            <form is="iron-form" id="form" action="{{ request.url }}" method="POST" class="login-form" enctype="application/x-www-form-urlencoded">
                {{ form.csrf_token() }}
                <paper-input name="name" autofocus="true" required="true" label="Nome" onblur="validateInput(this)"></paper-input>

                <paper-input name="born_date" autofocus="true" required="true" label="Nascimento" onblur="validateInput(this)"></paper-input>

                <paper-input name="missed_date" autofocus="true" required="true" label="Desaparecido em" onblur="validateInput(this)"></paper-input>

                <div>
                    <input id="images" multiple="" name="images" type="file">
                </div>

                <br>
                <div class="center">
                    <paper-button raised class="primary" onclick="submitForm()">Cadastrar</paper-button>
                </div>
            </form>
        </paper-card>
    </div>

</paper-header-panel>


<script>
    function validateInput(el) {
        console.log(el);
        return el.validate();
    }

    function submitForm() {
        var inputs = document.getElementsByTagName('paper-input');

        var valid = true;

        for (var i = 0; i < inputs.length; i++) {
            valid &= validateInput(inputs[i]);
        }

        if (valid)
            document.forms[0].submit();
    }
</script>


</body>
</html>